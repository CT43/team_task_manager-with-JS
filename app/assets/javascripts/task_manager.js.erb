$(document).ready(function(){
  $("a#lists_link").on("click", function(e){
    $.get(this.href).success(function(response){
      var $ol = $("div#listed_lists ol")
      $ol.html("")

      response.forEach(function(list){
        $ol.append("<li><a href="+`/users/${list.user_id}/lists/${list.id}`+">"+list.name+"</a></li>")
      })
    })

    e.preventDefault()
  })

  $("a#list_nav_link").on("click", function(e){
    $.get(this.href).success(function(response){
      var $lists = $("div#lists")
      $lists.html("")
      debugger

      var html = "<h2><%= @list.name %></h2><% @list.tasks.each do |task| %><%= escape_javascript form_for(task) do |f| %><%= f.label :name do %><%= f.check_box :completed %><%= task.name %><%= f.submit %><% end %><% end %><% end %>";

      $lists.append(html);

    })


    e.preventDefault()
  })
})


var html = "<li><%= @todo.description %><br><strong>priority: </strong> <%= @todo.priority %><br><%= escape_javascript link_to 'done', todo_path(@todo), method: 'delete' %></li>";

$('ul').append(html);
